<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Type Ahead ğŸ‘€</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <form class="search-form">
    <input type="text" class="search" placeholder="City or State">
    <ul class="suggestions">
      <li>Filter for a city</li>
      <li>or a state</li>
    </ul>
  </form>
  <script>
    const endpoint = 'https://gist.githubusercontent.com/Miserlou/c5cd8364bf9b2420bb29/raw/2bf258763cdddd704f8ffd3ea9a3e81d25e2c6f6/cities.json';

    const list = document.querySelector('form ul');
    const input = document.querySelector('input');
    const city_population = [[], [], []]; //åŸå¸‚+äººå£


    fetch(endpoint)
      .then(function (response) {
        // console.log(response.json());  å¦‚æœé€™é‚Šå…ˆlogä¸€æ¬¡ï¼Œå†ç”¨returnå°±æœƒå£æ‰ï¼Œåªèƒ½å‘¼å«ä¸€æ¬¡
        return response.json();
      })
      .catch(function (error) { //å°šé ˆç¢ºå®šé€™å€‹è¦æ”¾å“ªè£¡
        console.log(error);
      })
      .then(function (myJson) {
        // console.log(myJson);
// æŠŠé™£åˆ—å®£å‘Šåœ¨thenæ¯”è¼ƒä¸å¥½ï¼Œé€™æ¨£å°±å‚³ä¸å‡ºä¾†ï¼Œæ‰€ä»¥æŠŠé™£åˆ—å®£å‘Šåœ¨æœ€å¤–å±¤ç„¶å¾Œå°‡è³‡æ–™pushé€²é™£åˆ—å°±èƒ½åœ¨thenå¤–ä½¿ç”¨

        Object.values(myJson).forEach(element => { //å°‡ç‰©ä»¶è½‰æ›ç‚ºé™£åˆ—åŠ ä»¥ç”¨foreach
          city_population[0].push(element.city);
          city_population[1].push(element.population.replace(/\B(?=(\d{3})+(?!\d))/g, ','));
          city_population[2].push(element.state);
        });

        // æ­£å‰‡ï¼š\B å»åˆéæ–‡å­—é‚Šç•Œ non-word boundaryå‘Šè¨´æ­£å‰‡ï¼šé–‹é ­ä½å…ƒä¸éœ€è¦è™•ç†ï¼Œå°±ç®—ç¬¦åˆçš„æƒ…æ³ä¸‹ã€‚
        // .toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') é€™é‚Šå·²ç¶“æ˜¯å­—ä¸²å°±ä¸ç”¨toStringäº†
        // for (let x = 0; x < city_population[1].length; x++) {
        //   list.innerHTML +=
        //     `<li>
        //     <span>${city_population[0][x]},${city_population[2][x]}</span>
        //     <span>${city_population[1][x]}</span>
        //     </li>`;
        // }
        const list_li = document.querySelectorAll('form ul li');
        // console.log(list_li);
        // for (let x = 2; x < list_li.length; x++) {
        //   list_li[x].style.display = 'none';
        // }
      });

      // input.addEventListener('input',clear_every);
      input.addEventListener('input',comparison);

      // function clear_every(){
      //   const list_li = document.querySelectorAll('form ul li');
      //   list_li.forEach(function(li,index){
      //       li.style.display = 'none';
      //   });
      // }
      function comparison(){
        const list_li = document.querySelectorAll('form ul li');
        list_li.forEach(function(li,index){
          console.log(input.value);
          if(String(li.innerText).includes(input.value)){
            // li.style.display = 'flex';
            console.log(li);
          }
        });
      }

  </script>
</body>

</html>
<!-- æ¯ä¸‰ä½æ•¸å­—åŠ ä¸Šé€—é»å¯ä»¥é€™æ¨£åš(åœŸæ³•)
    let aaa = [];
    city_population[1].forEach(function(str){
    aaa.push(str.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ','));
  }) -->

  <!-- æˆ‘ç™¼ç¾ä»–liä¸æ˜¯å…ˆç”Ÿèµ·ä¾†æ”¾è€Œæ˜¯å‹•æ…‹ç”Ÿæˆli -->